---
import type { ExcerptToken } from '@types';

interface Props {
  code: ExcerptToken[] | string;
}

const { code } = Astro.props;
---

<script>
  import hljs from 'highlight.js';
  import typescript from 'highlight.js/lib/languages/typescript';

  hljs.registerLanguage('typescript', typescript);
  hljs.highlightAll();
</script>

<code class="language-ts">
  {
    typeof code === 'string'
      ? code
      : code.map((token) =>
          'url' in token ? <a href={token.url}>{token.text}</a> : token.text,
        )
  }
</code>
